<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>佣金详细</title>
    <link rel="stylesheet" href="../css/weui-min.css"/>
    <link rel="stylesheet" href="../css/example.css"/>
    <style>
        a :focus {
            background-color: #cc99cc;
            outline: none;
        }

        #modal-overlay {
            position: absolute; /* 使用绝对定位或固定定位  */
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            text-align: center;
            z-index: 1000;
            background-color: #fff;
        }

        #modal-overlay-opa {
            position: absolute; /* 使用绝对定位或固定定位  */
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            text-align: center;
            z-index: 1000;
            background-color: #fff;
            opacity: 0.5;
        }

        /* 模态框样式 */
        .modal-data {
            margin: 80% auto;
            padding: 15px;
            text-align: center;
            opacity: 0.5;
        }
    </style>
</head>

<body style="background-color: #f2f2f2;font-size: 15px;">
<div id="detail" style="height:100%">

    <div class="weui-flex" style="justify-content: center;align-items: center;height: 16%;">
        <div class="box weui-flex"
             style="flex: 0 0 100%;height:70%; background-image: url(../src/background.png);border-radius: 5px;align-items: center">
            <div class="item weui-flex__item" style="margin-left: 10px">
                <h3 style="color: #d9d9d9;font-size: 15px;font-weight: 200">总计推荐人数</h3>
                <span style="color: white;font-size: 15px" v-text="list[0]['technicians'].length"></span>
            </div>
            <div class="item weui-flex__item" style="margin-left: 10px">
                <h3 style="color: #d9d9d9;font-size: 15px;font-weight: 200">所获提成（元）</h3>
                <span style="color: white;font-size: 15px" v-text="'￥'+list[0]['come_from_other']"></span>
            </div>
            <div class="item weui-flex__item" style="margin-left: 10px">
                <h3 style="color: #d9d9d9;font-size: 15px;font-weight: 200">总钟数（次）</h3>
                <span style="color: white;font-size: 15px" v-text="list[0]['clock_num']"></span>
            </div>
        </div>
    </div>
    <!--推荐的第一个人-->
    <div v-for="it in list[0]['technicians']"class="weui-panel weui-panel_access" style="background-color: white;border-radius: 5px">
        <div class="weui-panel__hd">BBK882</div>
        <div class="display-block" style="border-bottom: 1px solid #f2f2f2;">
            <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg ">
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title" style="font-size: 14px">拔火罐</h4>
                    <p class="weui-media-box__desc">房号：2</p>
                </div>
                <div class="weui-media-box__bd" style="float: right;text-align: right">
                    <h4 class="weui-media-box__title" style="color: #cc99cc">￥98</h4>
                    <p class="weui-media-box__desc">2018/08/12&npsb;&npsb;&npsb;20:25</p>
                </div>
            </a>
            <div class="weui-panel__bd display-none" style="display: block;background-color: #f2f2f2;">
                <div class="weui-media-box weui-media-box_text" style="padding-bottom: 0;">
                    <div style="border: 1px solid #cc99cc;border-radius: 2px;width: 4px;height: 4px;"></div>
                    <div style="margin-left: 2px;border-left: 1px solid #cc99cc;height:50px;">
                        <h4 class="weui-media-box__desc " style="margin-left: 15px;margin-bottom: 0;">业绩流水号</h4>
                        <p class="weui-media-box__title" style="margin-left: 15px;color:#cc99cc;">{{
                            service.order_id }}</p>
                    </div>
                    <div style="border: 1px solid #cc99cc;border-radius: 2px;width: 4px;height: 4px;"></div>
                    <h4 class="weui-media-box__desc " style="margin-left: 15px;margin-bottom: 0;">
                        业绩金额（元）</h4>
                    <p class="weui-media-box__title" style="margin-left: 15px;color:#cc99cc;margin-bottom: 0">{{
                        service.income }}</p>
                </div>
            </div>
        </div>

    </div>


    <!--推荐的第二个人，懒得改data,我这里显示不完全样式，用v-if遍历一下应该就好了-->

    <!--<div class="weui-panel weui-panel_access" style="background-color: white;border-radius: 5px">-->
    <!--<div class="weui-panel__hd">BBK882</div>-->
    <!--<div class="display-block" style="border-bottom: 1px solid #f2f2f2;" v-for="(service, index) in service_list"-->
    <!--@click="showDetail(index)">-->
    <!--<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg ">-->
    <!--<div class="weui-media-box__hd"-->
    <!--style="border-radius: 50%;background-color: #ffcc99;height: 50px;width: 50px; justify-content: center;align-items: center; display: flex;">-->
    <!--<span>排钟</span>-->
    <!--</div>-->
    <!--&lt;!&ndash;<div v-if="service.clock_type==2" class="weui-media-box__hd"&ndash;&gt;-->
    <!--&lt;!&ndash;style="border-radius: 50%;background-color: #9fc5e8;height: 50px;width: 50px; justify-content: center;align-items: center; display: flex;">&ndash;&gt;-->
    <!--&lt;!&ndash;<span>点钟</span>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--<div class="weui-media-box__bd">-->
    <!--<h4 class="weui-media-box__title" style="font-size: 14px">拔火罐</h4>-->
    <!--<p class="weui-media-box__desc">房号：2</p>-->
    <!--</div>-->
    <!--<div class="weui-media-box__bd" style="float: right;text-align: right">-->
    <!--<h4 class="weui-media-box__title" style="color: #cc99cc">￥98</h4>-->
    <!--<p class="weui-media-box__desc">2018/08/12&npsb;&npsb;&npsb;20:25</p>-->
    <!--</div>-->
    <!--</a>-->
    <!--<div class="weui-panel__bd display-none" style="display: block;background-color: #f2f2f2;"-->
    <!--v-show="service.show">-->
    <!--<div class="weui-media-box weui-media-box_text" style="padding-bottom: 0;">-->
    <!--<div style="border: 1px solid #cc99cc;border-radius: 2px;width: 4px;height: 4px;"></div>-->
    <!--<div style="margin-left: 2px;border-left: 1px solid #cc99cc;height:50px;">-->
    <!--<h4 class="weui-media-box__desc " style="margin-left: 15px;margin-bottom: 0;">业绩流水号</h4>-->
    <!--<p class="weui-media-box__title" style="margin-left: 15px;color:#cc99cc;">{{-->
    <!--service.order_id }}</p>-->
    <!--</div>-->
    <!--<div style="border: 1px solid #cc99cc;border-radius: 2px;width: 4px;height: 4px;"></div>-->
    <!--<h4 class="weui-media-box__desc " style="margin-left: 15px;margin-bottom: 0;">-->
    <!--业绩金额（元）</h4>-->
    <!--<p class="weui-media-box__title" style="margin-left: 15px;color:#cc99cc;margin-bottom: 0">{{-->
    <!--service.income }}</p>-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->

    <!--</div>-->
    <div class="weui-footer" style="margin-top: 20px">
        <p class="weui-footer__text">查帐方式以结账时间为准</p>
    </div>
    <div :id="opa?'modal-overlay-opa':'modal-overlay'" v-show="show">
        <div class="modal-data">
            <img src="../src/loading.gif"/>
        </div>
    </div>
</div>

</body>
<script type="text/javascript" src="../js/jquery.js"></script>
<!-- <script src="https://vuejs.org/js/vue.js"></script> -->
<script src="../js/vue.js"></script>
<script type="text/javascript" src="../js/jweixin.js"></script>
<!-- <script type="text/javascript" src="example.js"></script> -->
<script type="text/javascript" src="../js/weui-min.js"></script>
<script type="text/javascript" src="../js/zepto.js"></script>
<script type="text/javascript" src="../js/sweetalert2.all.js"></script>
<script>
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
    let app = new Vue({
        el: '#detail',
        data:{
            list:[],
            show:true,
            opa:false,
        },
        methods: {
            showDetail(index) {
                this.service_list[index].show = !this.service_list[index].show;
                // this.service_list[index].bonus += 1;
            },

        },
        created(){
            var that = this;
            $.post('../php/getyeji.php',{
                job_number:[getQueryString('id')]
            }).done((res)=>{
                res = JSON.parse(res);
                if(res.status == 1){
                    for(var i in res.data){
                        that.list.push(res.data[i])
                    }
                }
                that.show = false;
                that.opa = true;
            })
        },
    })
</script>


</html>